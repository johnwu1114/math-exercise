{"version":3,"sources":["components/countdown.jsx","components/quiz-attempt.jsx","components/quiz-result.jsx","components/quiz-section-selector.jsx","components/quiz.jsx","libs/question-bank/multiplication.js","app.jsx","index.js"],"names":["Countdown","props","reset","pause","setState","second","max","resume","intervalId","clearInterval","setInterval","countdown","state","onChanged","timeout","getDuration","Math","min","parseFloat","this","value","toFixed","React","Component","QuizAttempt","countdownSeconds","nextQuestion","correct","question","questionBank","onFinish","results","choices","splice","length","current","checkAnswer","reply","logAnswer","result","answer","duration","push","onCountdownChanged","createRef","className","onClick","map","choice","i","ref","QuizResult","incorrect","forEach","avgDuration","score","floor","onClose","style","width","fontSize","textAlign","rowSpan","onReview","QuizSectionSelector","onStart","selected","sections","filter","x","isSelected","onSelected","event","section","toString","target","checked","isSelectedAll","toggleAll","getSections","type","onChange","text","Quiz","questions","generateQuestions","addQuestions","isStarted","showResult","isShowResult","quizAttempt","MultiplicationQuestionBank","level","selectionCount","multiplier","multiplicand","j","generateChoices","seeds","index","random","concat","currentQuestion","App","start","isStart","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.60c28b3a.chunk.js","sourcesContent":["import React from \"react\"\n\nexport default class Countdown extends React.Component {\n  constructor(props) {\n    super(props);\n    this.max = parseFloat(props.max || 10);\n    this.state = { second: this.max };\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalId);\n  }\n\n  reset = () => {\n    this.pause();\n    this.setState({ second: this.max });\n    this.resume();\n  }\n\n  pause = () => {\n    if (this.intervalId) clearInterval(this.intervalId);\n  }\n\n  resume = () => {\n    this.intervalId = setInterval(this.countdown, 100);\n  }\n\n  countdown = () => {\n    this.setState(state => ({\n      second: state.second - 0.1\n    }));\n    this.props.onChanged(this.state.second);\n    if (this.state.second > 0) return;\n    this.timeout();\n  }\n\n  timeout = () => {\n    this.props.timeout();\n  }\n\n  getDuration = () => {\n    return Math.min(this.max, this.max - this.state.second);\n  }\n\n  render() {\n    return (\n      <progress max={this.max} value={this.state.second.toFixed(1)}></progress>\n    );\n  }\n}","import React, { Component } from \"react\";\nimport Countdown from \"./countdown.jsx\";\n\nexport default class QuizAttempt extends Component {\n  countdownSeconds = 10;\n\n  constructor(props) {\n    super(props);\n\n    this.questionBank = props.questionBank;\n    this.results = [];\n\n    this.state = {\n      question: \"\",\n      answer: \"\",\n      choices: []\n    };\n    this.countdown = React.createRef();\n  }\n\n  componentDidMount() {\n    this.nextQuestion();\n  }\n\n  nextQuestion = () => {\n    this.setState({ correct: null });\n\n    let question = this.questionBank.nextQuestion();\n    if (question === null) {\n      this.props.onFinish(this.results);\n      this.results = [];\n      return;\n    }\n\n    this.state.choices.splice(0, this.state.choices.length);\n    this.setState(question);\n    this.countdown.current.reset();\n  }\n\n  checkAnswer = (reply) => {\n    this.countdown.current.pause();\n    let correct = this.questionBank.checkAnswer(reply);\n    this.setState({ correct: correct });\n    this.logAnswer(reply);\n\n    if (correct) this.nextQuestion();\n  }\n\n  logAnswer = (reply) => {\n    let result = {\n      question: this.state.question,\n      answer: this.state.answer,\n      reply: reply,\n      correct: this.questionBank.checkAnswer(reply),\n      duration: this.countdown.current.getDuration()\n    };\n    this.results.push(result);\n  }\n\n  onCountdownChanged = (value) => {\n    this.setState({ countdown: value });\n  }\n\n  render() {\n    return (\n      <div>\n        <div className={`question ${this.state.countdown < 3 && this.state.correct !== false && \"blink\"}`}>\n          {this.state.question} {this.state.correct === false && `= ${this.state.answer}`}\n        </div>\n        {this.state.correct === false\n          ? <p>答錯了！<span className=\"btn large blue\" onClick={() => this.nextQuestion()}>下一題</span></p>\n          : <ul className=\"choices\">\n            {this.state.choices.map((choice, i) =>\n              <li key={i} onClick={() => this.checkAnswer(choice)} >{choice}</li>\n            )}\n          </ul>}\n        <Countdown ref={this.countdown}\n          max={this.countdownSeconds}\n          timeout={() => this.checkAnswer()}\n          onChanged={value => this.onCountdownChanged(value)} />\n      </div>\n    );\n  }\n}","import React, { Component } from \"react\";\n\nexport default class QuizResult extends Component {\n  constructor(props) {\n    super(props);\n\n    let correct = 0;\n    let incorrect = 0;\n    let timeout = 0;\n    let duration = 0;\n    let results = this.props.results || [];\n    results.forEach(result => {\n      if (result.correct) correct++;\n      else if (result.reply) incorrect++;\n      else timeout++;\n      duration += result.duration;\n    });\n    this.state = {\n      results: results,\n      correct: correct,\n      incorrect: incorrect,\n      timeout: timeout,\n      avgDuration: results.length && duration / results.length,\n      duration: duration,\n      score: results.length && Math.floor(correct / results.length * 100),\n    };\n  }\n\n  render() {\n    return (\n      <div className=\"modal\">\n        <div className=\"modal-content\">\n          <span className=\"close\" onClick={() => this.props.onClose()}>x</span>\n          <table>\n            <tbody>\n              <tr>\n                <td style={{ width: \"40%\", fontSize: \"calc(10px + 10vmin)\", textAlign: \"right\" }} rowSpan=\"5\">{this.state.score} 分</td>\n                <td style={{ width: \"calc(80px + 10vmin)\" }}>答對次數：</td><td>{this.state.correct}</td>\n              </tr>\n              <tr><td>答錯次數：</td><td>{this.state.incorrect}</td></tr>\n              <tr><td>逾時次數：</td><td>{this.state.timeout}</td></tr>\n              <tr><td>平均耗時：</td><td>{this.state.avgDuration.toFixed(1)} 秒</td></tr>\n              <tr><td>全部耗時：</td><td>{this.state.duration.toFixed(1)} 秒</td></tr>\n            </tbody>\n          </table>\n          <hr />\n          <table>\n            <thead>\n              <tr>\n                <th style={{ width: \"5%\" }}></th>\n                <th>題目</th>\n                <th style={{ width: \"20%\" }}>解答</th>\n                <th style={{ width: \"20%\" }}>作答</th>\n                <th style={{ width: \"25%\" }}>耗時(秒)</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.results.map((result, i) => result.correct ||\n                <tr key={i} className={result.correct ? \"correct\" : \"incorrect\"}>\n                  <td><b /></td>\n                  <td>{result.question}</td>\n                  <td>{result.answer}</td>\n                  <td>{result.reply || \"--\"}</td>\n                  <td>{result.duration.toFixed(1)}</td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n          <span className=\"btn\" onClick={() => this.props.onClose()}>關閉</span>\n          {this.state.incorrect >= 3 && <span className=\"btn blue\" onClick={() => this.props.onReview()}>複習</span>}\n        </div>\n      </div>\n    );\n  }\n}","import React, { Component } from \"react\";\n\nexport default class QuizSectionSelector extends Component {\n  constructor(props) {\n    super(props);\n    let sections = this.props.questionBank.getSections();\n    sections[0].isSelected = true;\n    this.state = {\n      sections: sections,\n      isSelectedAll: false\n    }\n  }\n\n  onStart = () => {\n    let selected = this.state.sections.filter(x => x.isSelected);\n    if (selected.length > 0)\n      this.props.onStart(selected);\n  }\n\n  onSelected = (event) => {\n    let sections = this.state.sections;\n    sections.forEach(section => {\n      if (section.value.toString() === event.target.value.toString()) {\n        section.isSelected = event.target.checked;\n      }\n    });\n    this.setState({\n      isSelected: sections.filter(x => x.isSelected).length > 0,\n      sections: sections,\n      isSelectedAll: sections.filter(x => x.isSelected !== true).length === 0\n    });\n  }\n\n  toggleAll = () => {\n    let sections = this.state.sections;\n    let isSelectedAll = !this.state.isSelectedAll;\n    sections.forEach(section => {\n      section.isSelected = isSelectedAll;\n    })\n    this.setState({\n      isSelected: sections.filter(x => x.isSelected).length > 0,\n      sections: sections,\n      isSelectedAll: isSelectedAll\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <h1>請選擇</h1>\n        <ul className=\"sections\">\n          {this.state.sections.map((section, i) =>\n            <li key={i}>\n              <label>\n                <input type=\"checkbox\" onChange={this.onSelected} checked={section.isSelected || false} value={section.value} />\n                <span>{section.text}</span>\n              </label>\n            </li>\n          )}\n          {<li>\n            <label>\n              <input type=\"checkbox\" onChange={this.toggleAll} checked={this.state.isSelectedAll} />\n              <span>全選</span>\n            </label>\n          </li>}\n        </ul>\n        <span className={`btn large ${this.state.isSelected ? \"green\" : \"disable\"}`} onClick={() => this.onStart()}>開始</span>\n      </div>\n    );\n  }\n}","import \"../styles/quiz.css\";\nimport React, { Component } from \"react\";\nimport QuizAttempt from \"./quiz-attempt.jsx\";\nimport QuizResult from \"./quiz-result.jsx\";\nimport QuizSectionSelector from \"./quiz-section-selector.jsx\";\n\nexport default class Quiz extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      question: \"\",\n      answer: \"\",\n      choices: [],\n      results: []\n    };\n    this.quizAttempt = React.createRef();\n  }\n\n  onStart = (sections) => {\n    let questions = this.props.questionBank.generateQuestions(sections);\n    this.props.questionBank.addQuestions(questions);\n    this.setState({ isStarted: true });\n  }\n\n  showResult = (results) => {\n    this.state.results.splice(0, this.state.results.length);\n    this.setState({\n      isShowResult: true,\n      results: results\n    });\n  }\n\n  onReview = () => {\n    let questions = this.state.results\n      .filter(x => !x.correct)\n      .map(x => {\n        return {\n          question: x.question,\n          answer: x.answer\n        }\n      });\n    for (let i = 0; i < 3; i++)\n      this.props.questionBank.addQuestions(questions);\n\n    this.quizAttempt.current.nextQuestion();\n    this.setState({ isShowResult: false });\n  }\n\n  onClose = () => {\n    this.props.onClose();\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"header\">\n          {this.state.isShowResult || <span className=\"close\" onClick={() => this.props.onClose()}>x</span>}\n        </div>\n        {this.state.isStarted\n          ? <QuizAttempt ref={this.quizAttempt}\n            questionBank={this.props.questionBank}\n            onFinish={results => this.showResult(results)}\n            onClose={() => this.onClose()} />\n          : <QuizSectionSelector\n            questionBank={this.props.questionBank}\n            onStart={sections => this.onStart(sections)} />}\n        {this.state.isShowResult &&\n          <QuizResult\n            results={this.state.results}\n            onReview={() => this.onReview()}\n            onClose={() => this.onClose()} />}\n      </div>\n    );\n  }\n}","export default class MultiplicationQuestionBank {\n  selectionCount = 6;\n\n\n  constructor(level) {\n    switch (level || 1) {\n      case 2:\n        this.multiplier = 11;\n        this.multiplicand = 19;\n        break;\n      default:\n        this.multiplier = 2;\n        this.multiplicand = 9;\n        break;\n    }\n  }\n\n  getSections = () => {\n    let sections = [];\n    for (let i = this.multiplier; i <= this.multiplicand; i++) {\n      sections.push({\n        text: `${i} x ${this.multiplicand}`,\n        value: i\n      });\n    }\n    return sections;\n  }\n\n  generateQuestions = (sections) => {\n    let questions = [];\n    (sections || this.getSections())\n    .forEach(section => {\n      for (let j = 2; j <= this.multiplicand; j++) {\n        questions.push({\n          question: `${section.value} x ${j}`,\n          answer: section.value * j\n        });\n      }\n    });\n    return questions;\n  }\n\n  generateChoices = (answer) => {\n    let seeds = [];\n    for (let i = Math.max(2, answer - 20); i < answer + 20; i++) {\n      if (i !== answer) seeds.push(i);\n    }\n\n    let choices = [];\n    for (let i = 1; i < this.selectionCount; i++) {\n      let index = Math.floor(Math.random() * seeds.length);\n      let choice = seeds.splice(index, 1)[0];\n      choices.push(choice);\n    }\n    choices.splice(Math.floor(Math.random() * 5), 0, answer);\n\n    return choices;\n  }\n\n  addQuestions = (questions) => {\n    this.questions = this.questions || [];\n    this.questions = this.questions.concat(questions || []);\n  }\n\n  nextQuestion = () => {\n    if (this.questions.length === 0) return null;\n    let index = Math.floor(Math.random() * this.questions.length);\n    let question = this.questions.splice(index, 1)[0];\n    question.choices = this.generateChoices(question.answer);\n    return this.currentQuestion = question;\n  }\n\n  checkAnswer = (reply) => {\n    return reply === this.currentQuestion.answer;\n  }\n}","import React, { Component } from \"react\";\nimport Quiz from \"./components/quiz.jsx\";\nimport MultiplicationQuestionBank from \"./libs/question-bank/multiplication.js\";\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { isStart: false };\n  }\n\n  start = (questionBank) => {\n    this.setState({\n      isStart: true,\n      questionBank: questionBank\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        { this.state.isStart\n          ? <Quiz questionBank={this.state.questionBank} onClose={() => this.setState({ isStart: false })} />\n          : <ul>\n            <li className=\"btn large green\" onClick={() => this.start(new MultiplicationQuestionBank())}>\n              9 x 9 乘法練習\n            </li>\n            <li className=\"btn large green\" onClick={() => this.start(new MultiplicationQuestionBank(2))}>\n              19 x 19 乘法練習\n            </li>\n          </ul>\n\n        }\n      </div>\n    );\n  }\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/main.css\";\nimport App from \"./app.jsx\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n"],"sourceRoot":""}