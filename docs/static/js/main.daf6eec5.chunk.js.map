{"version":3,"sources":["components/countdown.jsx","domain/NineNineMultiplication/result-report.jsx","domain/NineNineMultiplication/index.jsx","domain/App/index.jsx","index.js"],"names":["Countdown","props","reset","pause","setState","second","max","resume","intervalId","clearInterval","setInterval","countdown","state","onChanged","timeout","getDuration","Math","min","parseFloat","this","value","toFixed","React","Component","ResultReport","correct","incorrect","duration","results","forEach","result","pass","reply","avgDuration","length","score","floor","className","onClick","onClose","style","width","fontSize","rowSpan","map","i","question","answer","NineNineMultiplication","selectionCount","countdownSeconds","nextQuestion","questions","index","random","item","splice","createSelections","current","showReport","selections","seeds","push","selection","fail","logAnswer","enableRepeat","onCountdownChanged","createRef","j","ref","App","isStart","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.daf6eec5.chunk.js","sourcesContent":["import React from \"react\"\n\nexport default class Countdown extends React.Component {\n  constructor(props) {\n    super(props);\n    this.max = parseFloat(props.max || 10);\n    this.state = { second: this.max };\n  }\n\n  componentDidMount() {\n    this.reset();\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalId);\n  }\n\n  reset = () => {\n    this.pause();\n    this.setState({ second: this.max });\n    this.resume();\n  }\n\n  pause = () => {\n    if (this.intervalId) clearInterval(this.intervalId);\n  }\n\n  resume = () => {\n    this.intervalId = setInterval(this.countdown, 100);\n  }\n\n  countdown = () => {\n    this.setState(state => ({\n      second: state.second - 0.1\n    }));\n    this.props.onChanged(this.state.second);\n    if (this.state.second > 0) return;\n    this.timeout();\n  }\n\n  timeout = () => {\n    this.props.timeout();\n  }\n\n  getDuration = () => {\n    return Math.min(this.max, this.max - this.state.second);\n  }\n\n  render() {\n    return (\n      <progress max={this.max} value={this.state.second.toFixed(1)}></progress>\n    );\n  }\n}","import \"./style.css\";\nimport React, { Component } from \"react\";\n\nexport default class ResultReport extends Component {\n  constructor(props) {\n    super(props);\n\n    let correct = 0;\n    let incorrect = 0;\n    let timeout = 0;\n    let duration = 0;\n    this.props.results.forEach(result => {\n      if (result.pass) correct++;\n      else if (result.reply) incorrect++;\n      else timeout++;\n      duration += result.duration;\n    });\n    this.state = {\n      results: this.props.results,\n      correct: correct,\n      incorrect: incorrect,\n      timeout: timeout,\n      avgDuration: duration / this.props.results.length,\n      duration: duration,\n      score: Math.floor(correct / this.props.results.length * 100),\n    };\n  }\n\n  render() {\n    return (\n      <div className=\"modal\">\n        <div className=\"modal-content\">\n          <span className=\"close\" onClick={() => this.props.onClose()}>x</span>\n          <table>\n            <tbody>\n              <tr><td style={{ width: \"50%\", fontSize: \"calc(10px + 12vmin)\" }} rowSpan=\"5\">{this.state.score} 分</td><td style={{ width: \"30%\" }}>答對次數：</td><td>{this.state.correct}</td></tr>\n              <tr><td>答錯次數：</td><td>{this.state.incorrect}</td></tr>\n              <tr><td>逾時次數：</td><td>{this.state.timeout}</td></tr>\n              <tr><td>平均耗時：</td><td>{this.state.avgDuration.toFixed(1)} 秒</td></tr>\n              <tr><td>全部耗時：</td><td>{this.state.duration.toFixed(1)} 秒</td></tr>\n            </tbody>\n          </table>\n          <hr />\n          <table>\n            <thead>\n              <tr>\n                <th style={{ width: \"5%\" }}></th>\n                <th>題目</th>\n                <th style={{ width: \"20%\" }}>解答</th>\n                <th style={{ width: \"20%\" }}>作答</th>\n                <th style={{ width: \"25%\" }}>耗時(秒)</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.results.map((result, i) => result.pass || \n                <tr key={i} className={result.pass ? \"pass\" : \"fail\"}>\n                  <td><b /></td>\n                  <td>{result.question}</td>\n                  <td>{result.answer}</td>\n                  <td>{result.reply || \"--\"}</td>\n                  <td>{result.duration.toFixed(1)}</td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n          <span className=\"btn-close\" onClick={() => this.props.onClose()}>關閉</span>\n        </div>\n      </div>\n    );\n  }\n}","import \"./style.css\";\nimport React, { Component } from \"react\";\nimport Countdown from \"../../components/countdown.jsx\";\nimport ResultReport from \"./result-report.jsx\";\n\nexport default class NineNineMultiplication extends Component {\n  selectionCount = 6;\n  countdownSeconds = 10;\n\n  constructor(props) {\n    super(props);\n\n    this.countdown = React.createRef();\n    this.questions = [];\n    this.results = [];\n    this.enableRepeat = props.enableRepeat || false;\n\n    for (let i = 2; i <= 9; i++)\n      for (let j = 2; j <= 9; j++) {\n        this.questions.push({\n          question: `${i} x ${j}`,\n          answer: i * j\n        });\n      }\n\n    this.state = {\n      question: \"\",\n      answer: \"\",\n      selections: [],\n      showReport: false,\n      results: []\n    };\n  }\n\n  componentDidMount() {\n    this.nextQuestion();\n  }\n\n  nextQuestion = () => {\n    this.setState({ pass: null });\n\n    if (this.questions.length === 0) {\n      this.setState({\n        showReport: true,\n        results: this.results\n      });\n      return;\n    }\n\n    let index = Math.floor(Math.random() * this.questions.length);\n    let item = this.questions.splice(index, 1)[0];\n    this.setState(item);\n    this.createSelections(item.answer);\n    this.countdown.current.reset();\n  }\n\n  createSelections = (answer) => {\n    this.state.selections.splice(0, this.state.selections.length);\n\n    let seeds = [];\n    for (let i = Math.max(2, answer - 20); i < answer + 20; i++) {\n      if (i !== answer) seeds.push(i);\n    }\n\n    let selections = [];\n    for (let i = 1; i < this.selectionCount; i++) {\n      let index = Math.floor(Math.random() * seeds.length);\n      let selection = seeds.splice(index, 1)[0];\n      selections.push(selection);\n    }\n    selections.splice(Math.floor(Math.random() * 5), 0, answer);\n\n    this.setState({ selections: selections });\n  }\n\n  answer = (reply) => {\n    this.countdown.current.pause();\n\n    let pass = reply === this.state.answer;\n    this.setState({ pass: pass });\n\n    if (pass) this.nextQuestion();\n    else this.fail();\n\n    this.logAnswer(reply)\n  }\n\n  fail = () => {\n    if (this.enableRepeat) {\n      this.questions.push({\n        question: this.state.question,\n        answer: this.state.answer\n      });\n    }\n  }\n\n  logAnswer = (reply) => {\n    let result = {\n      question: this.state.question,\n      answer: this.state.answer,\n      reply: reply,\n      pass: reply === this.state.answer,\n      duration: this.countdown.current.getDuration()\n    };\n    this.results.push(result);\n  }\n\n  onClose = () => {\n    this.props.onClose();\n  }\n\n  onCountdownChanged = (value) => {\n    this.setState({ countdown: value });\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"header\">\n          {!this.state.showReport && <span className=\"close\" onClick={() => this.onClose()}>x</span>}\n        </div>\n        <div className={`question ${this.state.countdown < 3 && this.state.pass !== false && \"blink\"}`}>\n          {this.state.question} {this.state.pass === false && `= ${this.state.answer}`}\n        </div>\n        {this.state.pass === false\n          ? <p>答錯了！<span className=\"btn-next\" onClick={() => this.nextQuestion()}>下一題</span></p>\n          : <ul className=\"selections\">\n            {this.state.selections.map((selection, i) =>\n              <li key={i} onClick={() => this.answer(selection)} >{selection}</li>\n            )}\n          </ul>}\n        <Countdown ref={this.countdown}\n          max={this.countdownSeconds}\n          timeout={() => this.answer()}\n          onChanged={value => this.onCountdownChanged(value)} />\n        {this.state.showReport && <ResultReport onClose={() => this.onClose()} results={this.state.results} />}\n      </div>\n    );\n  }\n}","import \"./style.css\";\nimport React, { Component } from \"react\";\nimport NineNineMultiplication from \"../NineNineMultiplication/index.jsx\";\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { isStart: false };\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        { this.state.isStart\n          ? <NineNineMultiplication onClose={() => this.setState({ isStart: false })} />\n          : <span className=\"btn-start\" onClick={() => this.setState({ isStart: true })}>開始</span>\n        }\n      </div>\n    );\n  }\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./domain/App/index.jsx\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n"],"sourceRoot":""}