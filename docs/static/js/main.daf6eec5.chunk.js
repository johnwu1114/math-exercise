(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(t,e,s){},15:function(t,e,s){},16:function(t,e,s){"use strict";s.r(e);var n=s(0),c=s(1),r=s.n(c),a=s(8),o=s.n(a),i=(s(14),s(2)),l=s(3),u=s(5),d=s(4),h=(s(15),s(7),function(t){Object(u.a)(s,t);var e=Object(d.a)(s);function s(t){var n;return Object(i.a)(this,s),(n=e.call(this,t)).reset=function(){n.pause(),n.setState({second:n.max}),n.resume()},n.pause=function(){n.intervalId&&clearInterval(n.intervalId)},n.resume=function(){n.intervalId=setInterval(n.countdown,100)},n.countdown=function(){n.setState((function(t){return{second:t.second-.1}})),n.props.onChanged(n.state.second),n.state.second>0||n.timeout()},n.timeout=function(){n.props.timeout()},n.getDuration=function(){return Math.min(n.max,n.max-n.state.second)},n.max=parseFloat(t.max||10),n.state={second:n.max},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.reset()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){return Object(n.jsx)("progress",{max:this.max,value:this.state.second.toFixed(1)})}}]),s}(r.a.Component)),j=function(t){Object(u.a)(s,t);var e=Object(d.a)(s);function s(t){var n;Object(i.a)(this,s),n=e.call(this,t);var c=0,r=0,a=0,o=0;return n.props.results.forEach((function(t){t.pass?c++:t.reply?r++:a++,o+=t.duration})),n.state={results:n.props.results,correct:c,incorrect:r,timeout:a,avgDuration:o/n.props.results.length,duration:o,score:Math.floor(c/n.props.results.length*100)},n}return Object(l.a)(s,[{key:"render",value:function(){var t=this;return Object(n.jsx)("div",{className:"modal",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsx)("span",{className:"close",onClick:function(){return t.props.onClose()},children:"x"}),Object(n.jsx)("table",{children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{style:{width:"50%",fontSize:"calc(10px + 12vmin)"},rowSpan:"5",children:[this.state.score," \u5206"]}),Object(n.jsx)("td",{style:{width:"30%"},children:"\u7b54\u5c0d\u6b21\u6578\uff1a"}),Object(n.jsx)("td",{children:this.state.correct})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"\u7b54\u932f\u6b21\u6578\uff1a"}),Object(n.jsx)("td",{children:this.state.incorrect})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"\u903e\u6642\u6b21\u6578\uff1a"}),Object(n.jsx)("td",{children:this.state.timeout})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"\u5e73\u5747\u8017\u6642\uff1a"}),Object(n.jsxs)("td",{children:[this.state.avgDuration.toFixed(1)," \u79d2"]})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"\u5168\u90e8\u8017\u6642\uff1a"}),Object(n.jsxs)("td",{children:[this.state.duration.toFixed(1)," \u79d2"]})]})]})}),Object(n.jsx)("hr",{}),Object(n.jsxs)("table",{children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{style:{width:"5%"}}),Object(n.jsx)("th",{children:"\u984c\u76ee"}),Object(n.jsx)("th",{style:{width:"20%"},children:"\u89e3\u7b54"}),Object(n.jsx)("th",{style:{width:"20%"},children:"\u4f5c\u7b54"}),Object(n.jsx)("th",{style:{width:"25%"},children:"\u8017\u6642(\u79d2)"})]})}),Object(n.jsx)("tbody",{children:this.state.results.map((function(t,e){return t.pass||Object(n.jsxs)("tr",{className:t.pass?"pass":"fail",children:[Object(n.jsx)("td",{children:Object(n.jsx)("b",{})}),Object(n.jsx)("td",{children:t.question}),Object(n.jsx)("td",{children:t.answer}),Object(n.jsx)("td",{children:t.reply||"--"}),Object(n.jsx)("td",{children:t.duration.toFixed(1)})]},e)}))})]}),Object(n.jsx)("span",{className:"btn-close",onClick:function(){return t.props.onClose()},children:"\u95dc\u9589"})]})})}}]),s}(c.Component),b=function(t){Object(u.a)(s,t);var e=Object(d.a)(s);function s(t){var n;Object(i.a)(this,s),(n=e.call(this,t)).selectionCount=6,n.countdownSeconds=10,n.nextQuestion=function(){if(n.setState({pass:null}),0!==n.questions.length){var t=Math.floor(Math.random()*n.questions.length),e=n.questions.splice(t,1)[0];n.setState(e),n.createSelections(e.answer),n.countdown.current.reset()}else n.setState({showReport:!0,results:n.results})},n.createSelections=function(t){n.state.selections.splice(0,n.state.selections.length);for(var e=[],s=Math.max(2,t-20);s<t+20;s++)s!==t&&e.push(s);for(var c=[],r=1;r<n.selectionCount;r++){var a=Math.floor(Math.random()*e.length),o=e.splice(a,1)[0];c.push(o)}c.splice(Math.floor(5*Math.random()),0,t),n.setState({selections:c})},n.answer=function(t){n.countdown.current.pause();var e=t===n.state.answer;n.setState({pass:e}),e?n.nextQuestion():n.fail(),n.logAnswer(t)},n.fail=function(){n.enableRepeat&&n.questions.push({question:n.state.question,answer:n.state.answer})},n.logAnswer=function(t){var e={question:n.state.question,answer:n.state.answer,reply:t,pass:t===n.state.answer,duration:n.countdown.current.getDuration()};n.results.push(e)},n.onClose=function(){n.props.onClose()},n.onCountdownChanged=function(t){n.setState({countdown:t})},n.countdown=r.a.createRef(),n.questions=[],n.results=[],n.enableRepeat=t.enableRepeat||!1;for(var c=2;c<=9;c++)for(var a=2;a<=9;a++)n.questions.push({question:"".concat(c," x ").concat(a),answer:c*a});return n.state={question:"",answer:"",selections:[],showReport:!1,results:[]},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.nextQuestion()}},{key:"render",value:function(){var t=this;return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"header",children:!this.state.showReport&&Object(n.jsx)("span",{className:"close",onClick:function(){return t.onClose()},children:"x"})}),Object(n.jsxs)("div",{className:"question ".concat(this.state.countdown<3&&!1!==this.state.pass&&"blink"),children:[this.state.question," ",!1===this.state.pass&&"= ".concat(this.state.answer)]}),!1===this.state.pass?Object(n.jsxs)("p",{children:["\u7b54\u932f\u4e86\uff01",Object(n.jsx)("span",{className:"btn-next",onClick:function(){return t.nextQuestion()},children:"\u4e0b\u4e00\u984c"})]}):Object(n.jsx)("ul",{className:"selections",children:this.state.selections.map((function(e,s){return Object(n.jsx)("li",{onClick:function(){return t.answer(e)},children:e},s)}))}),Object(n.jsx)(h,{ref:this.countdown,max:this.countdownSeconds,timeout:function(){return t.answer()},onChanged:function(e){return t.onCountdownChanged(e)}}),this.state.showReport&&Object(n.jsx)(j,{onClose:function(){return t.onClose()},results:this.state.results})]})}}]),s}(c.Component),p=function(t){Object(u.a)(s,t);var e=Object(d.a)(s);function s(t){var n;return Object(i.a)(this,s),(n=e.call(this,t)).state={isStart:!1},n}return Object(l.a)(s,[{key:"render",value:function(){var t=this;return Object(n.jsx)("div",{className:"app",children:this.state.isStart?Object(n.jsx)(b,{onClose:function(){return t.setState({isStart:!1})}}):Object(n.jsx)("span",{className:"btn-start",onClick:function(){return t.setState({isStart:!0})},children:"\u958b\u59cb"})})}}]),s}(c.Component);o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(p,{})}),document.getElementById("root"))},7:function(t,e,s){}},[[16,1,2]]]);
//# sourceMappingURL=main.daf6eec5.chunk.js.map