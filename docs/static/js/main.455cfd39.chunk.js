(this["webpackJsonpmath-exercise"]=this["webpackJsonpmath-exercise"]||[]).push([[0],{13:function(t,e,s){},14:function(t,e,s){},15:function(t,e,s){"use strict";s.r(e);var n=s(0),c=s(1),r=s.n(c),a=s(7),i=s.n(a),o=(s(13),s(2)),u=s(3),l=s(5),h=s(4),d=(s(14),function(t){Object(l.a)(s,t);var e=Object(h.a)(s);function s(t){var n;return Object(o.a)(this,s),(n=e.call(this,t)).reset=function(){n.pause(),n.setState({second:n.max}),n.resume()},n.pause=function(){n.intervalId&&clearInterval(n.intervalId)},n.resume=function(){n.intervalId=setInterval(n.countdown,100)},n.countdown=function(){n.setState((function(t){return{second:t.second-.1}})),n.props.onChanged(n.state.second),n.state.second>0||n.timeout()},n.timeout=function(){n.props.timeout()},n.getDuration=function(){return Math.min(n.max,n.max-n.state.second)},n.max=parseFloat(t.max||10),n.state={second:n.max},n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.reset()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){return Object(n.jsx)("progress",{max:this.max,value:this.state.second.toFixed(1)})}}]),s}(r.a.Component)),j=function(t){Object(l.a)(s,t);var e=Object(h.a)(s);function s(t){var n;Object(o.a)(this,s),n=e.call(this,t);var c=0,r=0,a=0,i=0;return n.props.results.forEach((function(t){t.pass?c++:t.reply?r++:a++,i+=t.duration})),n.state={results:n.props.results,correct:c,incorrect:r,timeout:a,avgDuration:i/n.props.results.length,duration:i,score:Math.floor(c/n.props.results.length*100)},n}return Object(u.a)(s,[{key:"render",value:function(){var t=this;return Object(n.jsx)("div",{className:"modal",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsx)("span",{className:"close",onClick:function(){return t.props.onClose()},children:"x"}),Object(n.jsx)("table",{children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{style:{width:"50%",fontSize:"calc(10px + 12vmin)"},rowSpan:"5",children:[this.state.score," \u5206"]}),Object(n.jsx)("td",{style:{width:"30%"},children:"\u7b54\u5c0d\u6b21\u6578\uff1a"}),Object(n.jsx)("td",{children:this.state.correct})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"\u7b54\u932f\u6b21\u6578\uff1a"}),Object(n.jsx)("td",{children:this.state.incorrect})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"\u903e\u6642\u6b21\u6578\uff1a"}),Object(n.jsx)("td",{children:this.state.timeout})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"\u5e73\u5747\u8017\u6642\uff1a"}),Object(n.jsxs)("td",{children:[this.state.avgDuration.toFixed(1)," \u79d2"]})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"\u5168\u90e8\u8017\u6642\uff1a"}),Object(n.jsxs)("td",{children:[this.state.duration.toFixed(1)," \u79d2"]})]})]})}),Object(n.jsx)("hr",{}),Object(n.jsxs)("table",{children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{style:{width:"5%"}}),Object(n.jsx)("th",{children:"\u984c\u76ee"}),Object(n.jsx)("th",{style:{width:"20%"},children:"\u89e3\u7b54"}),Object(n.jsx)("th",{style:{width:"20%"},children:"\u4f5c\u7b54"}),Object(n.jsx)("th",{style:{width:"25%"},children:"\u8017\u6642(\u79d2)"})]})}),Object(n.jsx)("tbody",{children:this.state.results.map((function(t,e){return t.pass||Object(n.jsxs)("tr",{className:t.pass?"pass":"fail",children:[Object(n.jsx)("td",{children:Object(n.jsx)("b",{})}),Object(n.jsx)("td",{children:t.question}),Object(n.jsx)("td",{children:t.answer}),Object(n.jsx)("td",{children:t.reply||"--"}),Object(n.jsx)("td",{children:t.duration.toFixed(1)})]},e)}))})]}),Object(n.jsx)("span",{className:"btn-close",onClick:function(){return t.props.onClose()},children:"\u95dc\u9589"})]})})}}]),s}(c.Component),b=function(t){Object(l.a)(s,t);var e=Object(h.a)(s);function s(t){var n;return Object(o.a)(this,s),(n=e.call(this,t)).countdownSeconds=10,n.nextQuestion=function(){n.setState({pass:null});var t=n.strategy.nextQuestion();null!==t?(n.state.selections.splice(0,n.state.selections.length),n.setState(t),n.countdown.current.reset()):n.setState({showExamResult:!0,results:n.results})},n.checkAnswer=function(t){n.countdown.current.pause();var e=n.strategy.checkAnswer(t);n.setState({pass:e}),n.logAnswer(t),e?n.nextQuestion():n.fail()},n.fail=function(){n.enableRepeat&&n.mistakes.push({question:n.state.question,answer:n.state.answer})},n.logAnswer=function(t){var e={question:n.state.question,answer:n.state.answer,reply:t,pass:n.strategy.checkAnswer(t),duration:n.countdown.current.getDuration()};n.results.push(e)},n.onClose=function(){n.props.onClose()},n.onCountdownChanged=function(t){n.setState({countdown:t})},n.strategy=t.strategy,n.enableRepeat=t.enableRepeat||!1,n.enableRepeat&&(n.mistakes=[]),n.countdown=r.a.createRef(),n.results=[],n.state={question:"",answer:"",selections:[]},n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.nextQuestion()}},{key:"render",value:function(){var t=this;return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"header",children:!this.state.showExamResult&&Object(n.jsx)("span",{className:"close",onClick:function(){return t.onClose()},children:"x"})}),Object(n.jsxs)("div",{className:"question ".concat(this.state.countdown<3&&!1!==this.state.pass&&"blink"),children:[this.state.question," ",!1===this.state.pass&&"= ".concat(this.state.answer)]}),!1===this.state.pass?Object(n.jsxs)("p",{children:["\u7b54\u932f\u4e86\uff01",Object(n.jsx)("span",{className:"btn-next",onClick:function(){return t.nextQuestion()},children:"\u4e0b\u4e00\u984c"})]}):Object(n.jsx)("ul",{className:"selections",children:this.state.selections.map((function(e,s){return Object(n.jsx)("li",{onClick:function(){return t.checkAnswer(e)},children:e},s)}))}),Object(n.jsx)(d,{ref:this.countdown,max:this.countdownSeconds,timeout:function(){return t.checkAnswer()},onChanged:function(e){return t.onCountdownChanged(e)}}),this.state.showExamResult&&Object(n.jsx)(j,{onClose:function(){return t.onClose()},results:this.state.results})]})}}]),s}(c.Component),x=function t(){var e=this;Object(o.a)(this,t),this.selectionCount=6,this.questions=[],this.generateQuestions=function(){for(var t=[],s=2;s<=9;s++)for(var n=2;n<=9;n++)t.push({question:"".concat(s," x ").concat(n),answer:s*n});e.questions=t},this.generateSelections=function(t){for(var s=[],n=Math.max(2,t-20);n<t+20;n++)n!==t&&s.push(n);for(var c=[],r=1;r<e.selectionCount;r++){var a=Math.floor(Math.random()*s.length),i=s.splice(a,1)[0];c.push(i)}return c.splice(Math.floor(5*Math.random()),0,t),c},this.nextQuestion=function(){if(0===e.questions.length)return null;var t=Math.floor(Math.random()*e.questions.length),s=e.questions.splice(t,1)[0];return s.selections=e.generateSelections(s.answer),e.currentQuestion=s},this.checkAnswer=function(t){return t===e.currentQuestion.answer},this.generateQuestions()},O=function(t){Object(l.a)(s,t);var e=Object(h.a)(s);function s(t){var n;return Object(o.a)(this,s),(n=e.call(this,t)).start=function(){n.setState({isStart:!0,strategy:new x})},n.state={isStart:!1},n}return Object(u.a)(s,[{key:"render",value:function(){var t=this;return Object(n.jsx)("div",{className:"app",children:this.state.isStart?Object(n.jsx)(b,{strategy:this.state.strategy,onClose:function(){return t.setState({isStart:!1})}}):Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"\u4e5d\u4e5d\u4e58\u6cd5\u7df4\u7fd2"}),Object(n.jsx)("span",{className:"btn-start",onClick:function(){return t.start()},children:"\u958b\u59cb"})]})})}}]),s}(c.Component);i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(O,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.455cfd39.chunk.js.map