{"version":3,"sources":["components/countdown.jsx","components/exam-results.jsx","components/exam.jsx","libs/nine-nine-multiplication.js","app.jsx","index.js"],"names":["Countdown","props","reset","pause","setState","second","max","resume","intervalId","clearInterval","setInterval","countdown","state","onChanged","timeout","getDuration","Math","min","parseFloat","this","value","toFixed","React","Component","ExamResult","correct","incorrect","duration","results","forEach","result","pass","reply","avgDuration","length","score","floor","className","onClick","onClose","style","width","fontSize","rowSpan","map","i","question","answer","Exam","countdownSeconds","nextQuestion","strategy","selections","splice","current","showExamResult","checkAnswer","logAnswer","fail","enableRepeat","mistakes","push","onCountdownChanged","createRef","selection","ref","NineNineMultiplication","selectionCount","questions","generateQuestions","j","generateSelections","seeds","index","random","currentQuestion","App","start","isStart","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.455cfd39.chunk.js","sourcesContent":["import React from \"react\"\n\nexport default class Countdown extends React.Component {\n  constructor(props) {\n    super(props);\n    this.max = parseFloat(props.max || 10);\n    this.state = { second: this.max };\n  }\n\n  componentDidMount() {\n    this.reset();\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalId);\n  }\n\n  reset = () => {\n    this.pause();\n    this.setState({ second: this.max });\n    this.resume();\n  }\n\n  pause = () => {\n    if (this.intervalId) clearInterval(this.intervalId);\n  }\n\n  resume = () => {\n    this.intervalId = setInterval(this.countdown, 100);\n  }\n\n  countdown = () => {\n    this.setState(state => ({\n      second: state.second - 0.1\n    }));\n    this.props.onChanged(this.state.second);\n    if (this.state.second > 0) return;\n    this.timeout();\n  }\n\n  timeout = () => {\n    this.props.timeout();\n  }\n\n  getDuration = () => {\n    return Math.min(this.max, this.max - this.state.second);\n  }\n\n  render() {\n    return (\n      <progress max={this.max} value={this.state.second.toFixed(1)}></progress>\n    );\n  }\n}","import React, { Component } from \"react\";\n\nexport default class ExamResult extends Component {\n  constructor(props) {\n    super(props);\n\n    let correct = 0;\n    let incorrect = 0;\n    let timeout = 0;\n    let duration = 0;\n    this.props.results.forEach(result => {\n      if (result.pass) correct++;\n      else if (result.reply) incorrect++;\n      else timeout++;\n      duration += result.duration;\n    });\n    this.state = {\n      results: this.props.results,\n      correct: correct,\n      incorrect: incorrect,\n      timeout: timeout,\n      avgDuration: duration / this.props.results.length,\n      duration: duration,\n      score: Math.floor(correct / this.props.results.length * 100),\n    };\n  }\n\n  render() {\n    return (\n      <div className=\"modal\">\n        <div className=\"modal-content\">\n          <span className=\"close\" onClick={() => this.props.onClose()}>x</span>\n          <table>\n            <tbody>\n              <tr><td style={{ width: \"50%\", fontSize: \"calc(10px + 12vmin)\" }} rowSpan=\"5\">{this.state.score} 分</td><td style={{ width: \"30%\" }}>答對次數：</td><td>{this.state.correct}</td></tr>\n              <tr><td>答錯次數：</td><td>{this.state.incorrect}</td></tr>\n              <tr><td>逾時次數：</td><td>{this.state.timeout}</td></tr>\n              <tr><td>平均耗時：</td><td>{this.state.avgDuration.toFixed(1)} 秒</td></tr>\n              <tr><td>全部耗時：</td><td>{this.state.duration.toFixed(1)} 秒</td></tr>\n            </tbody>\n          </table>\n          <hr />\n          <table>\n            <thead>\n              <tr>\n                <th style={{ width: \"5%\" }}></th>\n                <th>題目</th>\n                <th style={{ width: \"20%\" }}>解答</th>\n                <th style={{ width: \"20%\" }}>作答</th>\n                <th style={{ width: \"25%\" }}>耗時(秒)</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.results.map((result, i) => result.pass ||\n                <tr key={i} className={result.pass ? \"pass\" : \"fail\"}>\n                  <td><b /></td>\n                  <td>{result.question}</td>\n                  <td>{result.answer}</td>\n                  <td>{result.reply || \"--\"}</td>\n                  <td>{result.duration.toFixed(1)}</td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n          <span className=\"btn-close\" onClick={() => this.props.onClose()}>關閉</span>\n        </div>\n      </div>\n    );\n  }\n}","import \"../styles/exam.css\";\nimport React, { Component } from \"react\";\nimport Countdown from \"./countdown.jsx\";\nimport ExamResult from \"./exam-results.jsx\";\n\nexport default class Exam extends Component {\n  countdownSeconds = 10;\n\n  constructor(props) {\n    super(props);\n\n    this.strategy = props.strategy;\n    this.enableRepeat = props.enableRepeat || false;\n    if (this.enableRepeat) this.mistakes = [];\n    this.countdown = React.createRef();\n    this.results = [];\n\n    this.state = {\n      question: \"\",\n      answer: \"\",\n      selections: []\n    };\n  }\n\n  componentDidMount() {\n    this.nextQuestion();\n  }\n\n  nextQuestion = () => {\n    this.setState({ pass: null });\n\n    let question = this.strategy.nextQuestion();\n    if (question === null) {\n      this.setState({\n        showExamResult: true,\n        results: this.results\n      });\n      return;\n    }\n\n    this.state.selections.splice(0, this.state.selections.length);\n    this.setState(question);\n    this.countdown.current.reset();\n  }\n\n  checkAnswer = (reply) => {\n    this.countdown.current.pause();\n\n    let pass = this.strategy.checkAnswer(reply);\n    this.setState({ pass: pass });\n    this.logAnswer(reply);\n\n    if (pass) this.nextQuestion();\n    else this.fail();\n  }\n\n  fail = () => {\n    if (this.enableRepeat) {\n      this.mistakes.push({\n        question: this.state.question,\n        answer: this.state.answer\n      });\n    }\n  }\n\n  logAnswer = (reply) => {\n    let result = {\n      question: this.state.question,\n      answer: this.state.answer,\n      reply: reply,\n      pass: this.strategy.checkAnswer(reply),\n      duration: this.countdown.current.getDuration()\n    };\n    this.results.push(result);\n  }\n\n  onClose = () => {\n    this.props.onClose();\n  }\n\n  onCountdownChanged = (value) => {\n    this.setState({ countdown: value });\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"header\">\n          {!this.state.showExamResult && <span className=\"close\" onClick={() => this.onClose()}>x</span>}\n        </div>\n        <div className={`question ${this.state.countdown < 3 && this.state.pass !== false && \"blink\"}`}>\n          {this.state.question} {this.state.pass === false && `= ${this.state.answer}`}\n        </div>\n        {this.state.pass === false\n          ? <p>答錯了！<span className=\"btn-next\" onClick={() => this.nextQuestion()}>下一題</span></p>\n          : <ul className=\"selections\">\n            {this.state.selections.map((selection, i) =>\n              <li key={i} onClick={() => this.checkAnswer(selection)} >{selection}</li>\n            )}\n          </ul>}\n        <Countdown ref={this.countdown}\n          max={this.countdownSeconds}\n          timeout={() => this.checkAnswer()}\n          onChanged={value => this.onCountdownChanged(value)} />\n        {this.state.showExamResult && <ExamResult onClose={() => this.onClose()} results={this.state.results} />}\n      </div>\n    );\n  }\n}","export default class NineNineMultiplication {\n  selectionCount = 6;\n  questions = [];\n\n  constructor() {\n    this.generateQuestions()\n  }\n\n  generateQuestions = () => {\n    let questions = [];\n    for (let i = 2; i <= 9; i++) {\n      for (let j = 2; j <= 9; j++) {\n        questions.push({\n          question: `${i} x ${j}`,\n          answer: i * j\n        });\n      }\n    }\n    this.questions = questions;\n  }\n\n  generateSelections = (answer) => {\n    let seeds = [];\n    for (let i = Math.max(2, answer - 20); i < answer + 20; i++) {\n      if (i !== answer) seeds.push(i);\n    }\n\n    let selections = [];\n    for (let i = 1; i < this.selectionCount; i++) {\n      let index = Math.floor(Math.random() * seeds.length);\n      let selection = seeds.splice(index, 1)[0];\n      selections.push(selection);\n    }\n    selections.splice(Math.floor(Math.random() * 5), 0, answer);\n\n    return selections;\n  }\n\n  nextQuestion = () => {\n    if (this.questions.length === 0) return null;\n    let index = Math.floor(Math.random() * this.questions.length);\n    let question = this.questions.splice(index, 1)[0];\n    question.selections = this.generateSelections(question.answer);\n    return this.currentQuestion = question;\n  }\n\n  checkAnswer = (reply) => {\n    return reply === this.currentQuestion.answer;\n  }\n}","import React, { Component } from \"react\";\nimport Exam from \"./components/exam.jsx\";\nimport NineNineMultiplication from \"./libs/nine-nine-multiplication.js\";\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { isStart: false };\n  }\n\n  start = () => {\n    this.setState({\n      isStart: true,\n      strategy: new NineNineMultiplication()\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        { this.state.isStart\n          ? <Exam strategy={this.state.strategy} onClose={() => this.setState({ isStart: false })} />\n          : <div><h1>九九乘法練習</h1><span className=\"btn-start\" onClick={() => this.start()}>開始</span></div>\n        }\n      </div>\n    );\n  }\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/main.css\";\nimport App from \"./app.jsx\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n"],"sourceRoot":""}