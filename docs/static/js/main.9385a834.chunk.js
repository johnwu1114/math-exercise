(this["webpackJsonpmath-exercise"]=this["webpackJsonpmath-exercise"]||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var s=n(0),c=n(1),r=n.n(c),i=n(7),o=n.n(i),a=(n(13),n(2)),u=n(3),l=n(5),h=n(4),d=(n(14),function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(a.a)(this,n),(s=e.call(this,t)).reset=function(){s.pause(),s.setState({second:s.max}),s.resume()},s.pause=function(){s.intervalId&&clearInterval(s.intervalId)},s.resume=function(){s.intervalId=setInterval(s.countdown,100)},s.countdown=function(){s.setState((function(t){return{second:t.second-.1}})),s.props.onChanged(s.state.second),s.state.second>0||s.timeout()},s.timeout=function(){s.props.timeout()},s.getDuration=function(){return Math.min(s.max,s.max-s.state.second)},s.max=parseFloat(t.max||10),s.state={second:s.max},s}return Object(u.a)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){return Object(s.jsx)("progress",{max:this.max,value:this.state.second.toFixed(1)})}}]),n}(r.a.Component)),j=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(a.a)(this,n),(s=e.call(this,t)).countdownSeconds=10,s.nextQuestion=function(){s.setState({correct:null});var t=s.strategy.nextQuestion();if(null===t)return s.props.onFinish(s.results),void(s.results=[]);s.state.choices.splice(0,s.state.choices.length),s.setState(t),s.countdown.current.reset()},s.checkAnswer=function(t){s.countdown.current.pause();var e=s.strategy.checkAnswer(t);s.setState({correct:e}),s.logAnswer(t),e&&s.nextQuestion()},s.logAnswer=function(t){var e={question:s.state.question,answer:s.state.answer,reply:t,correct:s.strategy.checkAnswer(t),duration:s.countdown.current.getDuration()};s.results.push(e)},s.onCountdownChanged=function(t){s.setState({countdown:t})},s.strategy=t.strategy,s.results=[],s.state={question:"",answer:"",choices:[]},s.countdown=r.a.createRef(),s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.nextQuestion()}},{key:"render",value:function(){var t=this;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"question ".concat(this.state.countdown<3&&!1!==this.state.correct&&"blink"),children:[this.state.question," ",!1===this.state.correct&&"= ".concat(this.state.answer)]}),!1===this.state.correct?Object(s.jsxs)("p",{children:["\u7b54\u932f\u4e86\uff01",Object(s.jsx)("span",{className:"btn large blue",onClick:function(){return t.nextQuestion()},children:"\u4e0b\u4e00\u984c"})]}):Object(s.jsx)("ul",{className:"choices",children:this.state.choices.map((function(e,n){return Object(s.jsx)("li",{onClick:function(){return t.checkAnswer(e)},children:e},n)}))}),Object(s.jsx)(d,{ref:this.countdown,max:this.countdownSeconds,timeout:function(){return t.checkAnswer()},onChanged:function(e){return t.onCountdownChanged(e)}})]})}}]),n}(c.Component),b=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var s;Object(a.a)(this,n),s=e.call(this,t);var c=0,r=0,i=0,o=0,u=s.props.results||[];return u.forEach((function(t){t.correct?c++:t.reply?r++:i++,o+=t.duration})),s.state={results:u,correct:c,incorrect:r,timeout:i,avgDuration:u.length&&o/u.length,duration:o,score:u.length&&Math.floor(c/u.length*100)},s}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return Object(s.jsx)("div",{className:"modal",children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsx)("span",{className:"close",onClick:function(){return t.props.onClose()},children:"x"}),Object(s.jsx)("table",{children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsxs)("td",{style:{width:"40%",fontSize:"calc(10px + 10vmin)",textAlign:"right"},rowSpan:"5",children:[this.state.score," \u5206"]}),Object(s.jsx)("td",{style:{width:"calc(80px + 10vmin);"},children:"\u7b54\u5c0d\u6b21\u6578\uff1a"}),Object(s.jsx)("td",{children:this.state.correct})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"\u7b54\u932f\u6b21\u6578\uff1a"}),Object(s.jsx)("td",{children:this.state.incorrect})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"\u903e\u6642\u6b21\u6578\uff1a"}),Object(s.jsx)("td",{children:this.state.timeout})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"\u5e73\u5747\u8017\u6642\uff1a"}),Object(s.jsxs)("td",{children:[this.state.avgDuration.toFixed(1)," \u79d2"]})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"\u5168\u90e8\u8017\u6642\uff1a"}),Object(s.jsxs)("td",{children:[this.state.duration.toFixed(1)," \u79d2"]})]})]})}),Object(s.jsx)("hr",{}),Object(s.jsxs)("table",{children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{style:{width:"5%"}}),Object(s.jsx)("th",{children:"\u984c\u76ee"}),Object(s.jsx)("th",{style:{width:"20%"},children:"\u89e3\u7b54"}),Object(s.jsx)("th",{style:{width:"20%"},children:"\u4f5c\u7b54"}),Object(s.jsx)("th",{style:{width:"25%"},children:"\u8017\u6642(\u79d2)"})]})}),Object(s.jsx)("tbody",{children:this.state.results.map((function(t,e){return t.correct||Object(s.jsxs)("tr",{className:t.correct?"correct":"incorrect",children:[Object(s.jsx)("td",{children:Object(s.jsx)("b",{})}),Object(s.jsx)("td",{children:t.question}),Object(s.jsx)("td",{children:t.answer}),Object(s.jsx)("td",{children:t.reply||"--"}),Object(s.jsx)("td",{children:t.duration.toFixed(1)})]},e)}))})]}),Object(s.jsx)("span",{className:"btn",onClick:function(){return t.props.onClose()},children:"\u95dc\u9589"}),this.state.incorrect>=3&&Object(s.jsx)("span",{className:"btn blue",onClick:function(){return t.props.onReview()},children:"\u8907\u7fd2"})]})})}}]),n}(c.Component),f=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(a.a)(this,n),(s=e.call(this,t)).onStart=function(){var t=s.state.sections.filter((function(t){return t.isChecked}));t.length>0&&s.props.onStart(t)},s.onSelected=function(t){var e=s.state.sections;e.forEach((function(e){e.value.toString()===t.target.value.toString()&&(e.isChecked=t.target.checked)})),s.setState({isSelected:e.filter((function(t){return t.isChecked})).length>0,sections:e,selectedAll:0===e.filter((function(t){return!0!==t.isChecked})).length})},s.toggleAll=function(){var t=s.state.sections,e=!s.state.selectedAll;t.forEach((function(t){t.isChecked=e})),s.setState({isSelected:t.filter((function(t){return t.isChecked})).length>0,sections:t,selectedAll:e})},s.state={sections:s.props.strategy.getSections(),selectedAll:!1},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.toggleAll()}},{key:"render",value:function(){var t=this;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"\u8acb\u9078\u64c7"}),Object(s.jsx)("ul",{className:"sections",children:this.state.sections.map((function(e,n){return Object(s.jsx)("li",{children:Object(s.jsxs)("label",{children:[Object(s.jsx)("input",{type:"checkbox",onChange:t.onSelected,checked:e.isChecked||!1,value:e.value}),Object(s.jsx)("span",{children:e.text})]})},n)}))}),Object(s.jsx)("span",{className:"btn large ".concat(this.state.isSelected?"green":"disable"),onClick:function(){return t.onStart()},children:"\u958b\u59cb"})]})}}]),n}(c.Component),x=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(a.a)(this,n),(s=e.call(this,t)).onStart=function(t){var e=s.props.strategy.generateQuestions(t);s.props.strategy.addQuestions(e),s.setState({isStarted:!0})},s.showResult=function(t){s.state.results.splice(0,s.state.results.length),s.setState({isShowResult:!0,results:t})},s.onReview=function(){for(var t=s.state.results.filter((function(t){return!t.correct})).map((function(t){return{question:t.question,answer:t.answer}})),e=0;e<3;e++)s.props.strategy.addQuestions(t);s.quizAttempt.current.nextQuestion(),s.setState({isShowResult:!1})},s.onClose=function(){s.props.onClose()},s.state={question:"",answer:"",choices:[],results:[]},s.quizAttempt=r.a.createRef(),s}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"header",children:this.state.isShowResult||Object(s.jsx)("span",{className:"close",onClick:function(){return t.props.onClose()},children:"x"})}),this.state.isStarted?Object(s.jsx)(j,{ref:this.quizAttempt,strategy:this.props.strategy,onFinish:function(e){return t.showResult(e)},onClose:function(){return t.onClose()}}):Object(s.jsx)(f,{strategy:this.props.strategy,onStart:function(e){return t.onStart(e)}}),this.state.isShowResult&&Object(s.jsx)(b,{results:this.state.results,onReview:function(){return t.onReview()},onClose:function(){return t.onClose()}})]})}}]),n}(c.Component),O=function t(){var e=this;Object(a.a)(this,t),this.selectionCount=6,this.getSections=function(){for(var t=[],e=2;e<=9;e++)t.push({text:"".concat(e," x 9"),value:e});return t},this.generateQuestions=function(t){var n=[];return(t||e.getSections()).forEach((function(t){for(var e=2;e<=9;e++)n.push({question:"".concat(t.value," x ").concat(e),answer:t.value*e})})),n},this.generateChoices=function(t){for(var n=[],s=Math.max(2,t-20);s<t+20;s++)s!==t&&n.push(s);for(var c=[],r=1;r<e.selectionCount;r++){var i=Math.floor(Math.random()*n.length),o=n.splice(i,1)[0];c.push(o)}return c.splice(Math.floor(5*Math.random()),0,t),c},this.addQuestions=function(t){e.questions=e.questions||[],e.questions=e.questions.concat(t||[])},this.nextQuestion=function(){if(0===e.questions.length)return null;var t=Math.floor(Math.random()*e.questions.length),n=e.questions.splice(t,1)[0];return n.choices=e.generateChoices(n.answer),e.currentQuestion=n},this.checkAnswer=function(t){return t===e.currentQuestion.answer}},p=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(a.a)(this,n),(s=e.call(this,t)).start=function(t){s.setState({isStart:!0,strategy:t})},s.state={isStart:!1},s}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return Object(s.jsx)("div",{className:"app",children:this.state.isStart?Object(s.jsx)(x,{strategy:this.state.strategy,onClose:function(){return t.setState({isStart:!1})}}):Object(s.jsx)("span",{className:"btn large green",onClick:function(){return t.start(new O)},children:"\u4e5d\u4e5d\u4e58\u6cd5\u7df4\u7fd2"})})}}]),n}(c.Component);o.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(p,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.9385a834.chunk.js.map