(this["webpackJsonpmath-exercise"]=this["webpackJsonpmath-exercise"]||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(4),i=n.n(a),s=n(7),c=n.n(s),o=(n(13),n(1)),u=n(5),l=n(3),d=n(2),h=(n(14),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).intervalSeconds=.1,r.reset=function(){r.pause(),r.setState({timer:r.maximum}),r.resume()},r.pause=function(){r.intervalId&&clearInterval(r.intervalId)},r.resume=function(){r.intervalId=setInterval(r.countdown,1e3*r.intervalSeconds)},r.countdown=function(){r.setState((function(t){return{timer:t.timer-r.intervalSeconds}})),r.props.onChanged(r.state.timer),r.state.timer>0||r.timeout()},r.timeout=function(){r.props.timeout()},r.getDuration=function(){return Math.min(r.maximum,r.maximum-r.state.timer)},r.getStatus=function(){var t=Math.round(r.state.timer/r.maximum*100);return t<20?"danger":t<50?"warning":""},r.maximum=parseFloat(t.seconds||10),r.state={timer:r.maximum},r}return Object(u.a)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){return Object(r.jsx)("progress",{className:this.getStatus(),max:this.maximum,value:this.state.timer.toFixed(1)})}}]),n}(i.a.Component)),m=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).countdownSeconds=10,r.nextQuestion=function(){r.setState({correct:null,timeout:null});var t=r.questionBank.nextQuestion();if(null===t)return r.props.onFinish(r.results),void(r.results=[]);r.state.choices.splice(0,r.state.choices.length),r.setState(t),r.countdown.current.reset()},r.checkAnswer=function(t){r.countdown.current.pause();var e=r.questionBank.checkAnswer(t);r.setState({correct:e,timeout:null==t}),r.logAnswer(t),e&&r.nextQuestion()},r.logAnswer=function(t){var e={question:r.state,reply:t,correct:r.questionBank.checkAnswer(t),duration:r.countdown.current.getDuration()};r.results.push(e)},r.onCountdownChanged=function(t){r.setState({countdown:t})},r.questionBank=t.questionBank,r.results=[],r.state={description:"",answer:{},choices:[]},r.countdown=i.a.createRef(),r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.nextQuestion()}},{key:"render",value:function(){var t=this;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"question ".concat(this.state.countdown<3&&!1!==this.state.correct&&"blink"),children:[this.state.description," ",!1===this.state.correct&&"= ".concat(this.state.answer.text)]}),!1===this.state.correct?Object(r.jsxs)("p",{children:[this.state.timeout?"\u6642\u9593\u5230\uff01":"\u7b54\u932f\u4e86\uff01",Object(r.jsx)("span",{className:"btn large blue",onClick:function(){return t.nextQuestion()},children:"\u4e0b\u4e00\u984c"})]}):Object(r.jsx)("ul",{className:"choices",children:this.state.choices.map((function(e,n){return Object(r.jsx)("li",{onClick:function(){return t.checkAnswer(e)},children:e.text},n)}))}),Object(r.jsx)(h,{ref:this.countdown,seconds:this.countdownSeconds,timeout:function(){return t.checkAnswer()},onChanged:function(e){return t.onCountdownChanged(e)}})]})}}]),n}(a.Component),j=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;Object(o.a)(this,n),r=e.call(this,t);var a=0,i=0,s=0,c=0,u=r.props.results||[];return u.forEach((function(t){t.correct?a++:t.reply?i++:s++,c+=t.duration})),r.state={results:u,correct:a,incorrect:i,timeout:s,avgDuration:u.length&&c/u.length,duration:c,score:u.length&&Math.floor(a/u.length*100)},r}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return Object(r.jsx)("div",{className:"modal",children:Object(r.jsxs)("div",{className:"modal-content",children:[Object(r.jsx)("span",{className:"close",onClick:function(){return t.props.onClose()},children:"x"}),Object(r.jsx)("table",{children:Object(r.jsxs)("tbody",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsxs)("td",{style:{width:"40%",fontSize:"calc(10px + 10vmin)",textAlign:"right"},rowSpan:"5",children:[this.state.score," \u5206"]}),Object(r.jsx)("td",{style:{width:"calc(80px + 10vmin)"},children:"\u7b54\u5c0d\u6b21\u6578\uff1a"}),Object(r.jsx)("td",{children:this.state.correct})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"\u7b54\u932f\u6b21\u6578\uff1a"}),Object(r.jsx)("td",{children:this.state.incorrect})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"\u903e\u6642\u6b21\u6578\uff1a"}),Object(r.jsx)("td",{children:this.state.timeout})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"\u5e73\u5747\u8017\u6642\uff1a"}),Object(r.jsxs)("td",{children:[this.state.avgDuration.toFixed(1)," \u79d2"]})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"\u5168\u90e8\u8017\u6642\uff1a"}),Object(r.jsxs)("td",{children:[this.state.duration.toFixed(1)," \u79d2"]})]})]})}),Object(r.jsx)("hr",{}),Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{style:{width:"5%"}}),Object(r.jsx)("th",{children:"\u984c\u76ee"}),Object(r.jsx)("th",{style:{width:"20%"},children:"\u89e3\u7b54"}),Object(r.jsx)("th",{style:{width:"20%"},children:"\u4f5c\u7b54"}),Object(r.jsx)("th",{style:{width:"25%"},children:"\u8017\u6642(\u79d2)"})]})}),Object(r.jsx)("tbody",{children:this.state.results.map((function(t,e){return t.correct||Object(r.jsxs)("tr",{className:t.correct?"correct":"incorrect",children:[Object(r.jsx)("td",{children:Object(r.jsx)("b",{})}),Object(r.jsx)("td",{children:t.question.description}),Object(r.jsx)("td",{children:t.question.answer.text}),Object(r.jsx)("td",{children:null==t.reply?"--":t.reply.text}),Object(r.jsx)("td",{children:t.duration.toFixed(1)})]},e)}))})]}),Object(r.jsx)("span",{className:"btn",onClick:function(){return t.props.onClose()},children:"\u95dc\u9589"}),this.state.incorrect>=3&&Object(r.jsx)("span",{className:"btn blue",onClick:function(){return t.props.onReview()},children:"\u8907\u7fd2"})]})})}}]),n}(a.Component),x=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;Object(o.a)(this,n),(r=e.call(this,t)).onStart=function(){var t=r.state.sections.filter((function(t){return t.isSelected}));t.length>0&&r.props.onStart(t)},r.onSelected=function(t){var e=r.state.sections;e.forEach((function(e){e.text===t.target.value&&(e.isSelected=t.target.checked)})),r.setState({isSelected:e.filter((function(t){return t.isSelected})).length>0,sections:e,isSelectedAll:0===e.filter((function(t){return!0!==t.isSelected})).length})},r.toggleAll=function(){var t=r.state.sections,e=!r.state.isSelectedAll;t.forEach((function(t){t.isSelected=e})),r.setState({isSelected:t.filter((function(t){return t.isSelected})).length>0,sections:t,isSelectedAll:e})};var a=r.props.questionBank.getSections();return r.state={isSelected:a[0].isSelected=!0,sections:a,isSelectedAll:!1},r}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"\u8acb\u9078\u64c7"}),Object(r.jsxs)("ul",{className:"sections",children:[this.state.sections.map((function(e,n){return Object(r.jsx)("li",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",onChange:t.onSelected,checked:e.isSelected||!1,value:e.text}),Object(r.jsx)("span",{children:e.text})]})},n)})),Object(r.jsx)("li",{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",onChange:this.toggleAll,checked:this.state.isSelectedAll}),Object(r.jsx)("span",{children:"\u5168\u9078"})]})})]}),Object(r.jsx)("span",{className:"btn large ".concat(this.state.isSelected?"green":"disable"),onClick:function(){return t.onStart()},children:"\u958b\u59cb"})]})}}]),n}(a.Component),f=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).onStart=function(t){var e=r.props.questionBank.generateQuestions(t);r.props.questionBank.addQuestions(e),r.setState({isStarted:!0})},r.showResult=function(t){r.state.results.splice(0,r.state.results.length),r.setState({isShowResult:!0,results:t})},r.onReview=function(){for(var t=r.state.results.filter((function(t){return!t.correct})).map((function(t){return t.question})),e=0;e<3;e++)r.props.questionBank.addQuestions(t);r.quizAttempt.current.nextQuestion(),r.setState({isShowResult:!1})},r.onClose=function(){r.props.onClose()},r.state={description:"",answer:{},choices:[],results:[]},r.quizAttempt=i.a.createRef(),r}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"header",children:this.state.isShowResult||Object(r.jsx)("span",{className:"close",onClick:function(){return t.props.onClose()},children:"x"})}),this.state.isStarted?Object(r.jsx)(m,{ref:this.quizAttempt,questionBank:this.props.questionBank,onFinish:function(e){return t.showResult(e)},onClose:function(){return t.onClose()}}):Object(r.jsx)(x,{questionBank:this.props.questionBank,onStart:function(e){return t.onStart(e)}}),this.state.isShowResult&&Object(r.jsx)(j,{results:this.state.results,onReview:function(){return t.onReview()},onClose:function(){return t.onClose()}})]})}}]),n}(a.Component),b=function t(){Object(o.a)(this,t)};b.pickRandomItems=function(t,e){for(var n=[],r=0;r<e;r++){var a=b.getRandomInt(t.length),i=t.splice(a,1)[0];n.push(i)}return n},b.getRandomInt=function(t){return b.getRandomIntRange(0,t)},b.getRandomIntRange=function(t,e){return Math.floor(Math.random()*(e-t)+t)};var v=function t(){var e=this;Object(o.a)(this,t),this.selectionCount=6,this.generateChoices=function(t){for(var n=t.answer.value,r=t.answerRange||20,a=[],i=Math.max(2,n-r);i<n+r;i++)i!==n&&a.push({text:e.convertText(i),value:i});var s=e.selectionCount-1,c=b.pickRandomItems(a,s);return c.splice(b.getRandomInt(s),0,{text:e.convertText(n),value:n}),c},this.addQuestions=function(t){e.questions=e.questions||[],e.questions=e.questions.concat(t||[])},this.nextQuestion=function(){if(0===e.questions.length)return null;var t=b.getRandomInt(e.questions.length),n=e.questions.splice(t,1)[0];return n.choices=e.generateChoices(n),e.currentQuestion=n},this.checkAnswer=function(t){return null!=t&&t.value===e.currentQuestion.answer.value},this.convertText=function(t){return t.toString()}},p=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).questionCount=10,t.getSections=function(){return[{text:"10 \u4ee5\u5167\u52a0\u6cd5",minimum:0,minSummation:1,maxSummation:10,answerRange:10},{text:"20 \u4ee5\u5167\u52a0\u6cd5",minimum:0,minSummation:10,maxSummation:20,answerRange:10},{text:"\u5169\u4f4d\u6578\u52a0\u6cd5",minimum:10,minSummation:20,maxSummation:99,answerRange:20},{text:"\u4e09\u4f4d\u6578\u52a0\u6cd5",minimum:100,minSummation:200,maxSummation:999,answerRange:50},{text:"\u56db\u4f4d\u6578\u52a0\u6cd5",minimum:1e3,minSummation:2e3,maxSummation:9999,answerRange:50}]},t.generateQuestions=function(e){var n=[];return(e||t.getSections()).forEach((function(e){for(var r=new Map;r.size<t.questionCount;){var a=b.getRandomIntRange(e.minSummation,e.maxSummation),i=b.getRandomIntRange(e.minimum,a-e.minimum),s=a-i,c="".concat(i," + ").concat(s);r.set(c,{description:c,answer:{text:t.convertText(a),value:a},answerRange:e.answerRange})}r.forEach((function(t){n.push(t)}))})),n},t}return n}(v),g=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).questionCount=10,t.getSections=function(){return[{text:"10 \u4ee5\u5167\u6e1b\u6cd5",minimum:0,minSummation:1,maxSummation:10,answerRange:10},{text:"20 \u4ee5\u5167\u6e1b\u6cd5",minimum:0,minSummation:10,maxSummation:20,answerRange:10},{text:"\u5169\u4f4d\u6578\u6e1b\u6cd5",minimum:10,minSummation:20,maxSummation:99,answerRange:20},{text:"\u4e09\u4f4d\u6578\u6e1b\u6cd5",minimum:100,minSummation:200,maxSummation:999,answerRange:50},{text:"\u56db\u4f4d\u6578\u6e1b\u6cd5",minimum:1e3,minSummation:2e3,maxSummation:9909,answerRange:50}]},t.generateQuestions=function(e){var n=[];return(e||t.getSections()).forEach((function(e){for(var r=new Map;r.size<t.questionCount;){var a=b.getRandomIntRange(e.minSummation,e.maxSummation),i=b.getRandomIntRange(e.minimum,a),s=a-i,c="".concat(a," - ").concat(i);r.set(c,{description:c,answer:{text:t.convertText(s),value:s},answerRange:e.answerRange})}r.forEach((function(t){n.push(t)}))})),n},t}return n}(v),O=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;switch(Object(o.a)(this,n),(r=e.call(this)).getSections=function(){for(var t=[],e=r.multiplier;e<=r.multiplicand;e++)t.push({text:"".concat(e," x ").concat(r.multiplicand),value:e});return t},r.generateQuestions=function(t){var e=[];return(t||r.getSections()).forEach((function(t){for(var n=2;n<=r.multiplicand;n++)e.push({description:"".concat(t.value," x ").concat(n),answer:{text:r.convertText(t.value*n),value:t.value*n}})})),e},t||1){case 2:r.multiplier=11,r.multiplicand=19;break;default:r.multiplier=2,r.multiplicand=9}return r}return n}(v),S=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).drawClock=function(t){var e=r.canvas.current;e.height=e.width;var n=e.getContext("2d"),a=e.height/2;n.translate(a,a),a*=.9,r.context=n,r.radius=a;var i=(t||"00:00:00").split(":"),s=i[0]||"0",c=i[1]||"0",o=i[2]||"0";r.drawFace(),r.drawNumbers(),r.drawTime(s,c,o)},r.drawFace=function(){var t=r.context,e=r.radius;t.beginPath(),t.arc(0,0,e,0,2*Math.PI),t.fillStyle="white",t.fill()},r.drawNumbers=function(){var t=r.context,e=r.radius;t.beginPath(),t.fillStyle="black",t.font="bold ".concat(.2*e,"px arial"),t.textBaseline="middle",t.textAlign="center";for(var n=1;n<13;n++){var a=n*Math.PI/6;t.rotate(a),t.translate(0,.85*-e),t.rotate(-a),t.fillText(n.toString(),0,0),t.rotate(a),t.translate(0,.85*e),t.rotate(-a)}},r.drawTime=function(t,e,n){var a=r.radius;t=(t%=12)*Math.PI/6+e*Math.PI/360+n*Math.PI/21600,r.drawHand(t,.4*a,.07*a),e=e*Math.PI/30+n*Math.PI/1800,r.drawHand(e,.7*a,.05*a),"true"!==r.props.disableSecondhand&&(n=n*Math.PI/30,r.drawHand(n,.6*a,.02*a,"red"))},r.drawHand=function(t,e,n,a){var i=r.context;a=a||"black",i.beginPath(),i.arc(0,0,e*n*.015,0,2*Math.PI),i.fillStyle=a,i.fill(),i.beginPath(),i.strokeStyle=a,i.lineWidth=n,i.lineCap="round",i.moveTo(0,0),i.rotate(t),i.lineTo(0,-e),i.stroke(),i.rotate(-t)},r.canvas=i.a.createRef(),r}return Object(u.a)(n,[{key:"componentWillReceiveProps",value:function(t){this.drawClock(t.hhmmss)}},{key:"componentDidMount",value:function(){this.drawClock(this.props.hhmmss)}},{key:"render",value:function(){return Object(r.jsx)("canvas",{className:"clock",ref:this.canvas,width:this.props.width||200})}}]),n}(i.a.Component),w=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).questionCount=10,t.secondsInDay=86400,t.getSections=function(){return[{text:"\u6574\u9ede\u9418",intervalSeconds:3600,answerRange:10},{text:"\u534a\u9ede\u9418",intervalSeconds:1800,answerRange:10},{text:"5\u5206\u9418",intervalSeconds:300,answerRange:10},{text:"1\u5206\u9418",intervalSeconds:60,answerRange:10},{text:"\u6642\u5206\u79d2",intervalSeconds:5,answerRange:120}]},t.generateQuestions=function(e){var n=[];return(e||t.getSections()).forEach((function(e){for(var a=new Map;a.size<t.questionCount;){var i=5!==e.intervalSeconds,s=b.getRandomInt(t.secondsInDay/2);s-=s%e.intervalSeconds;var c=t.convertText(s,i);a.set(c,{description:Object(r.jsx)(S,{hhmmss:c,disableSecondhand:i.toString()}),answer:{text:c,value:s},answerRange:e.answerRange,intervalSeconds:e.intervalSeconds,disableSecondhand:i})}a.forEach((function(t){n.push(t)}))})),n},t.generateChoices=function(e){for(var n=e.answer.value,r=e.answerRange*e.intervalSeconds,a=e.intervalSeconds,i=[],s=Math.max(0,n-r);s<Math.min(n+r,t.secondsInDay/2);s+=a)s!==n&&i.push({text:t.convertText(s,e.disableSecondhand),value:s});var c=t.selectionCount-1,o=b.pickRandomItems(i,c);return o.splice(b.getRandomInt(c),0,{text:t.convertText(n,e.disableSecondhand),value:n}),o},t.convertText=function(t,e){var n=Math.floor(t/3600)+1,r=Math.floor(t%3600/60),a=t%60,i="".concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"));return e||(i+=":".concat(a.toString().padStart(2,"0"))),i},t}return n}(v),k=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).start=function(t){r.setState({isStart:!0,questionBank:t})},r.state={isStart:!1},r}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return Object(r.jsx)("div",{className:"app",children:this.state.isStart?Object(r.jsx)(f,{questionBank:this.state.questionBank,onClose:function(){return t.setState({isStart:!1})}}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"\u6578\u5b78\u7df4\u7fd2\u5c0f\u7a0b\u5f0f"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{className:"btn large green",onClick:function(){return t.start(new p)},children:"\u52a0\u6cd5\u7df4\u7fd2"}),Object(r.jsx)("li",{className:"btn large green",onClick:function(){return t.start(new g)},children:"\u6e1b\u6cd5\u7df4\u7fd2"}),Object(r.jsx)("li",{className:"btn large green",onClick:function(){return t.start(new O)},children:"9 x 9 \u4e58\u6cd5\u7df4\u7fd2"}),Object(r.jsx)("li",{className:"btn large green",onClick:function(){return t.start(new O(2))},children:"19 x 19 \u4e58\u6cd5\u7df4\u7fd2"}),Object(r.jsx)("li",{className:"btn large green",onClick:function(){return t.start(new w)},children:"\u6642\u9418\u7df4\u7fd2"})]})]})})}}]),n}(a.Component);c.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(k,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.1e2b5f0a.chunk.js.map